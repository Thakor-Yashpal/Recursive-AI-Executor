<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursive AI Executor</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1><i class="fas fa-code"></i> Recursive AI Executor</h1>
                <p>Generate Python code with AI and execute it recursively until successful</p>
            </div>
            <div class="header-actions">
                <button class="btn btn--secondary btn--sm" id="helpBtn">
                    <i class="fas fa-question-circle"></i> Help
                </button>
                <button class="btn btn--secondary btn--sm" id="settingsBtn">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Sidebar - Prompt Input -->
            <div class="sidebar">
                <div class="prompt-section">
                    <h3>Prompt Input</h3>
                    <textarea 
                        id="promptInput" 
                        placeholder="Enter your programming task in natural language...&#10;&#10;Example: 'Create a function to calculate factorial of a number'"
                        class="form-control prompt-textarea"
                    ></textarea>
                    
                    <div class="prompt-actions">
                        <button class="btn btn--primary btn--full-width" id="runBtn">
                            <i class="fas fa-play"></i> <span>Run</span>
                        </button>
                        <button class="btn btn--outline btn--full-width" id="clearBtn">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                    </div>
                </div>

                <div class="sample-prompts">
                    <h4>Sample Prompts</h4>
                    <div class="sample-list">
                        <div class="sample-item" data-prompt="Create a function to calculate factorial of a number">
                            <i class="fas fa-calculator"></i>
                            <span>Calculate factorial</span>
                        </div>
                        <div class="sample-item" data-prompt="Write a function to find prime numbers up to N">
                            <i class="fas fa-search"></i>
                            <span>Find prime numbers</span>
                        </div>
                        <div class="sample-item" data-prompt="Create a class for managing a simple todo list">
                            <i class="fas fa-list"></i>
                            <span>Todo list manager</span>
                        </div>
                        <div class="sample-item" data-prompt="Generate code to sort a list using quicksort algorithm">
                            <i class="fas fa-sort"></i>
                            <span>Quicksort implementation</span>
                        </div>
                        <div class="sample-item" data-prompt="Generate code to read a CSV file and calculate averages">
                            <i class="fas fa-file-csv"></i>
                            <span>CSV data analysis</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="content-area">
                <!-- Code Viewer -->
                <div class="code-section">
                    <div class="section-header">
                        <h3><i class="fas fa-code"></i> Generated Code</h3>
                        <div class="code-actions">
                            <button class="btn btn--sm btn--outline" id="copyCodeBtn">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="btn btn--sm btn--outline" id="downloadCodeBtn">
                                <i class="fas fa-download"></i> Download
                            </button>
                        </div>
                    </div>
                    <div class="code-viewer" id="codeViewer">
                        <div class="placeholder-content">
                            <i class="fas fa-code"></i>
                            <p>Generated Python code will appear here</p>
                            <span>Enter a prompt and click "Run" to get started</span>
                        </div>
                    </div>
                </div>

                <!-- Execution Log -->
                <div class="log-section">
                    <div class="section-header">
                        <h3><i class="fas fa-terminal"></i> Execution Log</h3>
                        <div class="log-actions">
                            <button class="btn btn--sm btn--outline" id="clearLogBtn">
                                <i class="fas fa-trash"></i> Clear Log
                            </button>
                            <button class="btn btn--sm btn--outline" id="downloadLogBtn">
                                <i class="fas fa-download"></i> Download
                            </button>
                        </div>
                    </div>
                    <div class="execution-log" id="executionLog">
                        <div class="placeholder-content">
                            <i class="fas fa-terminal"></i>
                            <p>Execution output will appear here</p>
                            <span>Run your first prompt to see the results</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-left">
                <div class="status-indicator" id="statusIndicator">
                    <i class="fas fa-circle status-idle"></i>
                    <span id="statusText">Ready</span>
                </div>
            </div>
            <div class="status-center">
                <div class="attempts-counter">
                    <span>Attempt: </span>
                    <span id="attemptCount">0</span>
                    <span>/</span>
                    <span id="maxAttempts">5</span>
                </div>
            </div>
            <div class="status-right">
                <div class="execution-time">
                    <span>Execution Time: </span>
                    <span id="executionTime">0s</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal hidden" id="helpModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>How to Use Recursive AI Executor</h3>
                <button class="modal-close" id="closeHelpModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h4><i class="fas fa-keyboard"></i> Getting Started</h4>
                    <ol>
                        <li>Enter a natural language description of your programming task</li>
                        <li>Click the "Run" button to start AI code generation</li>
                        <li>Watch as the system generates and executes Python code</li>
                        <li>If the code fails, it will automatically retry with improvements</li>
                        <li>View the final successful result in the execution log</li>
                    </ol>
                </div>
                <div class="help-section">
                    <h4><i class="fas fa-lightbulb"></i> Tips</h4>
                    <ul>
                        <li>Be specific in your prompts for better results</li>
                        <li>Try the sample prompts to see examples</li>
                        <li>The system will retry up to 5 times for errors</li>
                        <li>Download your results for future reference</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal hidden" id="settingsModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close" id="closeSettingsModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Maximum Retry Attempts</label>
                    <select class="form-control" id="maxAttemptsSelect">
                        <option value="3">3 attempts</option>
                        <option value="5" selected>5 attempts</option>
                        <option value="10">10 attempts</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Execution Timeout (seconds)</label>
                    <select class="form-control" id="timeoutSelect">
                        <option value="5">5 seconds</option>
                        <option value="10" selected>10 seconds</option>
                        <option value="30">30 seconds</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Theme</label>
                    <select class="form-control" id="themeSelect">
                        <option value="dark" selected>Dark</option>
                        <option value="light">Light</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--primary" id="saveSettingsBtn">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-spinner hidden" id="loadingSpinner">
        <div class="spinner"></div>
        <span id="loadingText">Generating code...</span>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="app.js"></script>
</body>
</html>